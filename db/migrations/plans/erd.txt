# source: https://app.diagrams.net/?src=about#G1pe-I-vJEF1rdLu7zXhRyQhJHBGLgtCJX#%7B%22pageId%22%3A%22a5Fe2Vng1zePS079xmIR%22%7D

openapi_spec
	PK: openapi_spec_id	| UUID
	FK: cuecode_config_id	| UUID
	spec_text	| text
	file_name	| varchar
	base_url	| varchar

cuecode_config
	PK: cuecode_config_id	| UUID
	FK: belongs_to_cuecode_account_id	| UUID
	config_is_finished	| boolean
	is_live	| boolean

cuecode_account
	PK: cuecode_account_id	| UUID
	email 	| varchar
	display_name 	| varchar
	password 	| varchar

cuecode_api_key
	PK: cuecode_api_key_id	| UUID
	FK: grants_access_to_account_id	| UUID
	secret	| varchar

service_credential 
	PK: id	| UUID
	FK: type_id	| UUID
	secret	| varchar

auth_type
	PK: auth_type_id	| UUID
	name	| varchar
	
configuration_job 
	PK: configuration_job_id | UUID
	FK: openapi_spec_id	| UUID
	status	| varchar
	start_timestamp	| timestamp
	end_timestamp	| timestamp (allow null)
	
openapi_server
	PK: openapi_server_id	| UUID
	FK: spec_id	| UUID
	url	| varchar

opanapi_path
	PK: openapi_path_id	| UUID
	FK: spec_id	| UUID
	path_templated	| varchar

openapi_operation
	PK: openapi_operation_id	| UUID
	FK: openapi_server_id	| UUID
	FK: openapi_path_id	| UUID
	http_verb	| enum("GET","POST","PUT","PATCH","DELETE")
	selection_prompt	| text
	selection_prompt_embedding	| vector(4096)
	llm_content_gen_tool_call_spec	| jsonb

openapi_payload_examples
	PK: payload_examples_id	| UUID
	example_of_openapi_op_id	| UUID
	example_text	| text

openapi_entity_to_operation
	PK: openapi_request_body	| UUID
	FK: contains_openapi_entity_id	| UUID
	FK: contained_in_openapi_operation_id	| UUID

opanapi_entity
	PK: openapi_entity_id	| UUID
	FK: contained_in_oa_spec_id	| UUID
	noun_prompt	| text
	noun_prompt_embedding	| vector(4096)

openapi_entity_dependency
	PK,FK: child_openapi_entity_id	| UUID
	PK,FK: parent_openapi_entity_id | UUID

openapi_default_verb_http_equiv
	PK: openapi_default_verb_http_equiv_id | UUID
	http_verb	| enum("GET","POST", "PUT","PATCH","DELETE")
	verb_lemma	| varchar
	verb_lemma_embedding	| vector(4096)

openapi_subject_of_verb
	PK: subject_of_verb_id | UUID
	FK: noun_openapi_entity_id | UUID

openapi_verb_http_equiv
	PK: openapi_verb_http_equiv_id	| UUID
	FK: subject_oa_subject_of_verb_id	| UUID
	FK: verb_applied_to_oa_operation_id	| UUID
	FK: verb_lemma_id	| UUID

verb_lemma
	PK: verb_id	| UUID
	verb_lemma	| varchar
	verb_lemma_embedding	| vector(4096)


relations:
	cuecode_account 1 : N cuecode_api_key
	cuecode_config N : 1/0 cuecode_account
	cuecode_config 1 : 1/0 service_credential
	service_credential N : 1/0 auth_type
	openapi_spec 1 : 1 cuecode_config
	openapi_spec 1 : N configuration_job
	openapi_spec 1 : N openapi_path
	openapi_spec 1 : N openapi_server
	openapi_spec 1 : N openapi_entity
	openapi_server 1 : N openapi_operation
	openapi_path 1 : n openapi_operation
	openapi_operation n : n openapi_entity_to_operation
	openapi_entity_to_operation n : n openapi_entity
	openapi_entity 1/0 : n openapi_entity_dependency
	openapi_entity 1 : n openapi_subject_of_verb
	openapi_operation 1 : N openapi_payload_examples
	openapi_operation 1/0 : N openapi_verb_http_equiv
	openapi_verb_http_equiv N : 1/0 verb_lemma
	openapi_verb_http_equiv 0/N : 0/1 openapi_subject_of_verb

